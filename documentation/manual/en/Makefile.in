XEP=@XEP@
XINC=@XINC@
FOP=@FOP@
XSLTPROC=@XSLTPROC@
XMLLINT=@XMLLINT@
ECSRC=@ECSRC@
HERE=@HERE@

DTD_URL=http://framework.zend.com/docbook/xml/4.4/docbookx.dtd
MODULE=module_specs
XMLFILE=

all:	manual.xml html

clean:
	-rm -f html/*.html
	-rm -f config.* configure 
	-rm -rf autom4te.cache
	-rm -f Makefile

# Build the docs in HTML format

html: html/index.html

html/index.html: manual.xml $(HTML_XSL)
	@echo "Rendering the whole manual with $(XSLTPROC)..."
	$(XSLTPROC) --xinclude --output html/index.html html.xsl manual.xml

# Build the docs in PDF format

# pdf: manual.xml $(FO_XSL)
#	$(XSLTPROC) --xinclude --output ZendFramework.fo $(FO_XSL) manual.xml
#	$(FOP) -fo ZendFramework.fo -pdf ZendFramework.pdf

check: manual.xml
	@echo "Checking the whole manual with $(XMLLINT)..."
	@$(XMLLINT) --xinclude --output _temp_manual.xml manual.xml
	@$(XMLLINT) --valid --noout --postvalid _temp_manual.xml \
	    && echo "OK"

check1: manual-lint.xml
	@if [ -n "$(XMLFILE)" ] ; then \
	    if [ -f "$(MODULE)/$(XMLFILE)" ] ; then \
		echo "Checking $(XMLFILE) with $(XMLLINT)..." ; \
		sed -e 's/@LINT@/$(MODULE)\/$(XMLFILE)/' manual-lint.xml \
		| $(XMLLINT) --xinclude --output _temp_$(XMLFILE) - ; \
		$(XMLLINT) --valid --noout --postvalid _temp_$(XMLFILE) \
		  && echo "OK" ; \
	    else  \
		echo "File $(MODULE)/$(XMLFILE) not found." ; \
	    fi ; \
	else \
	    echo "Please specify a filename, e.g. 'make XMLFILE=filename.xml lint'" ; \
	fi
