<sect1 id="zend.controller.rewriterouter.rewritebase">
    <title>ベース URL およびサブディレクトリ</title>

    <para>
        もとのルータとは異なり、RewriteRouter はサブディレクトリ内でも使用可能です。
        RewriteRouter がベース URL を検出し、適切に設定します。例えば
        <code>index.php</code> をどこかのサブディレクトリに
        <code>/projects/myapp/index.php</code> のように配置した場合、
        rewrite base (ベース URL) は <code>/projects/myapp</code> に設定されます。
        パスがルートにマッチするか調べる際に、この文字列がパスから取り除かれます。
        これにより、いろいろな可能性を考えてルートを用意する必要がなくなります。
        ルート <code>'user/:username'</code> は、
        <code>http://localhost/projects/myapp/user/martel</code> および
        <code>http://example.com/user/martel</code> の両方にマッチするのです。
    </para>

    <note>
        この処理は大文字小文字を区別します。そのため、
        URL とファイルシステムのサブディレクトリ名が確実に一致する必要があります
        (たとえ Windows マシンであっても同様です)。大文字小文字が一致しなかった場合は
        noRoute アクションがコールされます。
    </note>

    <para>
        rewrite base の検出に失敗する場合は、
        RewriteRouter クラスのメソッド setRewriteBase を使用して
        ベースパスを上書き指定することができます。
    </para>

    <programlisting role="php"><![CDATA[
$router->setRewriteBase('/projects/myapp');]]></programlisting>

    <note>
        この処理は、たいていの場合は不要です。
        これを使用することは推奨しません。なぜなら、
        コードを別の場所に移動させたときにはこの内容も変更しなければならず、
        それを管理するためにまたひとつ新たな設定項目が必要になってしまうからです。
    </note>

</sect1>
<!--
vim:se ts=4 sw=4 et:
-->